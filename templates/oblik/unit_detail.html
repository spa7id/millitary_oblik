{% extends "base.html" %}
{% block content %}

<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item">
      <a href="{% url 'oblik:index' %}">Головна</a>
    </li>

    <li class="breadcrumb-item">
      <a href="{% url 'oblik:units_list' %}">Підрозділи</a>
    </li>

    {% for crumb in breadcrumbs %}
      {% if forloop.last %}
        <li class="breadcrumb-item active">{{ crumb.name }}</li>
      {% else %}
        <li class="breadcrumb-item">
          <a href="{% url 'oblik:unit_detail' crumb.pk %}">
            {{ crumb.name }}
          </a>
        </li>
      {% endif %}
    {% endfor %}
  </ol>
</nav>

<div class="card shadow mb-4">
  <div class="card-header bg-primary text-white">
    <h3 class="mb-0">
      <i class="bi bi-building"></i>
      {{ unit_detail.name }}
    </h3>
  </div>

  <div class="card-body">
    <p>
      <i class="bi bi-diagram-3"></i>
      <strong>Тип:</strong> {{ unit_detail.unit_type }}
    </p>

    <p>
      <i class="bi bi-arrow-up-circle"></i>
      <strong>Підпорядковується:</strong>
      {% if unit_detail.parent %}
        {{ unit_detail.parent.name }}
      {% else %}
        <span class="text-muted">Немає (верхівка)</span>
      {% endif %}
    </p>

    <hr>

    <h5>
      <i class="bi bi-diagram-2"></i>
      Дочірні підрозділи
      <span class="badge badge-info">{{ sub_units.count }}</span>
    </h5>

    {% if sub_units %}
      <ul class="list-group mt-3">
        {% for sub_unit in sub_units %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <a href="{% url 'oblik:unit_detail' sub_unit.pk %}">
              <i class="bi bi-folder"></i>
              {{ sub_unit.name }}
            </a>
            <span class="badge badge-secondary">{{ sub_unit.unit_type }}</span>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="text-muted mt-2">Немає дочірніх підрозділів</p>
    {% endif %}

    <hr>

    <h5>
      <i class="bi bi-people-fill"></i>
      Особовий склад
      <span class="badge badge-primary">{{ service_members.count }}</span>
    </h5>

    {% if service_members %}
      <ul class="list-group mt-3">
        {% for member in service_members %}
          <li class="list-group-item">
            <a href="{% url 'oblik:service_member_detail' member.pk %}">
              {{ member.name }} {{ member.surname }}
            </a>
            <br>
            <small class="text-muted">
              {{ member.rank }} | {{ member.position }} | {{ member.unit.name }}
            </small>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="text-muted mt-2">Немає бійців</p>
    {% endif %}

  </div>
</div>

<a href="{% url 'oblik:units_list' %}" class="btn btn-secondary mt-3">
  ← Назад до списку підрозділів
</a>

{% endblock %}